# План рефакторинга: Core Enums (Нулевой Этап)

**Цель**: Создать единый источник правды о типах ошибок. Исправить фундаментальную логическую ошибку, из-за которой фатальные ошибки ключа считались временными.

## 1. Изменения в `src/core/enums.py`

### 1.1. Метод `is_retryable()`
- [x] **Задача**: Исключить из списка "временных" ошибок те, которые требуют смены ключа.
**Список Fatal (Убираем из Retryable):**
- `INVALID_KEY` (401)
- `NO_ACCESS` (403)
- `NO_QUOTA` (429/402)
- `NO_MODEL` (404)

**Список Retryable (Оставляем):**
- `NETWORK_ERROR` (502)
- `TIMEOUT` (504)
- `SERVER_ERROR` (500)
- `SERVICE_UNAVAILABLE` (503)
- `OVERLOADED` (503)
- `RATE_LIMITED` (429) — *Gateway будет повторять запрос с тем же ключом, Worker будет верифицировать.*

### 1.2. Новый метод `is_fatal()`
- [x] Добавить метод, возвращающий `True` для всех ошибок ключа (`INVALID_KEY`, `NO_ACCESS`, `NO_QUOTA`, `NO_MODEL`). Это нужно для читаемости условий в Gateway и Worker.

## 2. Тестирование (`tests/test_enums_logic.py`)
- [x] Написать тест, покрывающий матрицу типов ошибок, чтобы гарантировать, что `INVALID_KEY` больше не считается `retryable`.
